---
import Guide from "@components/Guide.astro";
import Television from "@components/Television.astro";
import Layout from "@layouts/Layout.astro";
import type { ActiveProgram, GuideData } from "@types";
import { GET } from "./api/guide.json";

const channelId = "00";
const channelName = "TV Guide";
const activeProgram: ActiveProgram = {
  program: { title: "What's Airing Now" },
};

// Fetch guide data from the API
const response = await GET(Astro);
const guideData: GuideData = await response.json();
---

<Layout title="Hypertext TV">
  <Television
    activeProgram={activeProgram}
    channelId={channelId}
    channelName={channelName}
  >
    <Guide guideData={guideData} />
  </Television>
</Layout>
